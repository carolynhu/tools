<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Istio Performance Dashboard</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <!-- Bootstrap CSS-->
  <link rel="stylesheet" href="../vendor/bootstrap/css/bootstrap.min.css">
  <!-- Font Awesome CSS-->
  <link rel="stylesheet" href="../vendor/font-awesome/css/font-awesome.min.css">
  <!-- Fontastic Custom icon font-->
  <link rel="stylesheet" href="../css/fontastic.css">
  <!-- Google fonts - Roboto -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700">
  <!-- jQuery Circle-->
  <link rel="stylesheet" href="../css/grasp_mobile_progress_circle-1.0.0.min.css">
  <!-- Custom Scrollbar-->
  <link rel="stylesheet" href="../vendor/malihu-custom-scrollbar-plugin/jquery.mCustomScrollbar.css">
  <!-- theme stylesheet-->
  <link rel="stylesheet" href="../css/style.blue.css" id="theme-stylesheet">
  <link rel="shortcut icon" href="../img/logo.png" />

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/spiermar/d3-flame-graph@2.0.3/dist/d3-flamegraph.css">

  <style>
    /* Space out content a bit */
    body {
      padding-top: 20px;
      padding-bottom: 20px;
    }
    /* Custom page header */
    .header {
      padding-bottom: 20px;
      padding-right: 15px;
      padding-left: 15px;
      border-bottom: 1px solid #e5e5e5;
    }
    /* Make the masthead heading the same height as the navigation */
    .header h3 {
      margin-top: 0;
      margin-bottom: 0;
      line-height: 40px;
    }
    /* Customize container */
    .container {
      max-width: 990px;
    }
  </style>

  <title>d3-flame-graph</title>

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

</head>
  <body>
    <!-- Side Navbar -->
    <nav class="side-navbar">
      <div class="side-navbar-wrapper">
        <!-- Sidebar Header    -->
        <div class="sidenav-header d-flex align-items-center justify-content-center">
          <div class="sidenav-header-inner text-center">
            <img src="../img/logo.png" alt="istio logo" class="img-fluid rounded-circle">
            <h2 class="h5">Istio Performance</h2><span>Dashboard</span>
          </div>
        </div>
        <!-- Sidebar Navigation Menus-->
        <div class="main-menu">
          <h5 class="sidenav-heading">Main</h5>
          <ul id="side-main-menu" class="side-menu list-unstyled">
            <li><a href="../index.html"><i class="fa fa-home"></i>Overview</a></li>
            <li><a href="release-build.html"> <i class="fa fa-list-ol"></i>Release Builds</a></li>
            <li><a href="#dropDown" aria-expanded="true" data-toggle="collapse">
              <i class="fa fa-area-chart"></i>Benchmarks</a>
              <ul id="dropDown" class="list-unstyled">
                <li><a href="cpu-memory.html"></i>CPU & Memory Usage</a></li>
                <li><a href="latency.html"></i>Latency Quantiles </a></li>
                <li class="active"><a href="flamegraph.html"></i>Flame Graph</a></li>
                <li><a href="microbenchmarks.html"></i>Micro Benchmarks</a></li>
              </ul>
            </li>
            <li><a href="configuration.html"><i class="fa fa-cogs"></i>Configurations</a></li>
            <li><a href="alert.html"><i class="fa fa-exclamation-triangle"></i>Regression Alerts</a></li>
            <li><a href="artifacts.html"> <i class="fa fa-file-text"></i>Artifacts</a></li>
          </ul>
        </div>
      </div>
    </nav>
    <div class="page">
      <!-- navbar-->
      <header class="header">
        <nav class="navbar">
          <div class="container-fluid">
            <div class="navbar-holder d-flex align-items-center justify-content-between">
              <div class="navbar-header"><a id="toggle-btn" href="#" class="menu-btn"><i class="icon-bars"></i></a><a href="../index.html" class="navbar-brand">
                <div class="brand-text d-none d-md-inline-block"><strong class="text-primary">Dashboard</strong></div></a></div>
            </div>
          </div>
        </nav>
      </header>
      <!-- Breadcrumb-->
      <div class="breadcrumb-holder">
        <div class="container-fluid">
          <ul class="breadcrumb">
            <li class="breadcrumb-item"><a href="../index.html">Overview</a></li>
            <li class="breadcrumb-item">Benchmarks</a></li>
            <li class="breadcrumb-item active">Flame Graph</li>
          </ul>
        </div>
      </div>
      <section class="charts">
        <div class="container-fluid">
          <!-- Page Header-->
          <header> 
            <h1 class="h3 display">Flame Graph</h1>
          </header>
          <div class="row">
            <div class="col-lg-12">
              <div class="card line-chart-example">
                <div class="card-header d-flex align-items-center">
                  <h4>Istio CPU Flame Graph</h4>
                </div>
                <div class="card-body">
                  <div class="container">
                    <div id="chart">
                    </div>
                    <hr>
                    <div id="details">
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>


      <!-- D3.js -->
      <script src="https://d3js.org/d3.v4.min.js" charset="utf-8"></script>

      <!-- d3-tip -->
      <script type="text/javascript" src=https://cdnjs.cloudflare.com/ajax/libs/d3-tip/0.9.1/d3-tip.min.js></script>

      <!-- d3-flamegraph -->
      <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/spiermar/d3-flame-graph@2.0.3/dist/d3-flamegraph.min.js"></script>

      <script type="text/javascript">
        var flameGraph = d3.flamegraph()
                .width(960)
                .cellHeight(18)
                .transitionDuration(750)
                .minFrameSize(5)
                .transitionEase(d3.easeCubic)
                .title("")
                .onClick(onClick)
                .differential(true)
                .selfValue(true);
        var details = document.getElementById("details");
        flameGraph.setDetailsElement(details);
        d3.json("data/differential.json", function(error, data) {
          if (error) return console.warn(error);
          d3.select("#chart")
                  .datum(data)
                  .call(flameGraph);
        });
        document.getElementById("form").addEventListener("submit", function(event){
          event.preventDefault();
          search();
        });
        function search() {
          var term = document.getElementById("term").value;
          flameGraph.search(term);
        }
        function clear() {
          document.getElementById('term').value = '';
          flameGraph.clear();
        }
        function resetZoom() {
          flameGraph.resetZoom();
        }
        function onClick(d) {
          console.info("Clicked on " + d.data.name);
        }
      </script>

      <!-- footer -->
      <footer class="main-footer">
        <div class="container-fluid">
          <div class="row">
            <div class="col-sm-12 text-right">
              <p>Istio Performance WG &copy; 2019</p>
            </div>
          </div>
        </div>
      </footer>
    </div>
    <!-- JavaScript files-->
    <script src="../vendor/jquery/jquery.min.js"></script>
    <script src="../vendor/popper.js/umd/popper.min.js"> </script>
    <script src="../vendor/bootstrap/js/bootstrap.min.js"></script>
    <script src="../js/grasp_mobile_progress_circle-1.0.0.min.js"></script>
    <script src="../vendor/jquery.cookie/jquery.cookie.js"> </script>
    <script src="../vendor/chart.js/Chart.min.js"></script>
    <script src="../vendor/jquery-validation/jquery.validate.min.js"></script>
    <script src="../vendor/malihu-custom-scrollbar-plugin/jquery.mCustomScrollbar.concat.min.js"></script>
    <script src="../js/latency.js"></script>
    <!-- Main File-->
    <script src="../js/front.js"></script>
  </body>
</html>